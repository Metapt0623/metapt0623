name: ä¸Šå¸‚å¹¿æ’­-æœ€ç»ˆå†²åˆº

on:
  workflow_dispatch: # æ–¹ä¾¿ä½ ç°åœ¨ç«‹å³ç‚¹å‡»è¿è¡Œ

jobs:
  launch:
    runs-on: ubuntu-latest
    steps:
      - name: å¹¿æ’­ä¸Šå¸‚æŒ‡ä»¤
        run: |
          # åŒ…å«ä½ çš„æ ¸å¿ƒ 4 ä¸ªä»“åº“
          REPOS=("Meta_Core" "EU_Verification" "Sonar_Server" "Identity_Node")
          
          WIKI_ID="https://github.com/Metapt0623/Identity_Node.wiki.git"
          WIKI_META="https://github.com/Metapt0623/Meta_Core.wiki.git"
          
          for REPO in "${REPOS[@]}"; do
            echo "ğŸš€ æ­£åœ¨å‘ $REPO å‘é€ä¸Šå¸‚å¹¿æ’­..."
            curl -X POST \
              -H "Authorization: token ${{ secrets.MY_WORKFLOW_TOKEN }}" \
              -H "Accept: application/vnd.github.v3+json" \
              https://api.github.com/repos/${{ github.repository_owner }}/$REPO/dispatches \
              -d "{\"event_type\": \"all_start\", \"client_payload\": {
                    \"id_wiki\": \"$WIKI_ID\", 
                    \"meta_wiki\": \"$WIKI_META\",
                    \"msg\": \"2æœˆ1æ—¥ä¸Šå¸‚å¹¿æ’­ï¼šå…¨ç³»ç»Ÿæ¿€æ´»ï¼\"
                  }}"
          done
