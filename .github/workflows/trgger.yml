name: 联动触发器
on:
  push:
    branches: [ "main" ] # 当主分支有代码更新时触发

jobs:
  dispatch:
    runs-on: ubuntu-latest
    steps:
      - name: 通知其他三个仓库
        run: |
          # 定义需要通知的仓库列表
          REPOS=("Meta_Core" "EU_Verification" "Sonar_Server")
          
          for REPO in "${REPOS[@]}"; do
            echo "正在启动 $REPO ..."
            curl -X POST \
              -H "Authorization: token ${{ secrets.MY_WORKFLOW_TOKEN }}" \
              -H "Accept: application/vnd.github.v3+json" \
              https://api.github.com/repos/${{ github.repository_owner }}/$REPO/dispatches \
              -d '{"event_type": "parent_update"}'
          done

